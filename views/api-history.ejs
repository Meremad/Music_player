
<h1 class="text-3xl font-bold mb-4">API Request History</h1>
<table class="w-full border-collapse border">
    <thead>
        <tr>
            <th class="border p-2">Name</th>
            <th class="border p-2">Type</th>
            <th class="border p-2">Timestamp</th>
        </tr>
    </thead>
    <tbody>
        <% history.forEach(entry => { %>
            <tr>
                <td class="border p-2"><%= entry.query %></td>
                <td class="border p-2"><%= entry.endpoint %></td>
                <td class="border p-2"><%= entry.timestamp.toLocaleString() %></td>

            </tr>
        <% }) %>
    </tbody>
</table>

<div id="detailsModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden items-center justify-center">
    <div class="bg-white p-8 rounded-lg max-w-2xl w-full">
        <h2 class="text-2xl font-bold mb-4">Request Details</h2>
        <pre id="detailsContent" class="bg-gray-100 p-4 rounded overflow-auto max-h-96"></pre>
        <button onclick="closeModal()" class="mt-4 bg-red-500 text-white px-4 py-2 rounded">Close</button>
    </div>
</div>

<script>
function viewDetails(id) {
    fetch(`/api/history/${id}`)
        .then(response => response.json())
        .then(data => {
            document.getElementById('detailsContent').textContent = JSON.stringify(data, null, 2);
            document.getElementById('detailsModal').classList.remove('hidden');
            document.getElementById('detailsModal').classList.add('flex');
        });
}

function closeModal() {
    document.getElementById('detailsModal').classList.add('hidden');
    document.getElementById('detailsModal').classList.remove('flex');
}
</script>

